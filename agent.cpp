//****************************************************************************
//
//
//
//****************************************************************************


 
 
// ===========================================================================
//                                   Libraries
// ===========================================================================



// ===========================================================================
//                                 Project Files
// ===========================================================================
#include <ctime>
#include <cmath>
#include "agent.h"


//############################################################################
//                                                                           #
//                           Class agent                            #
//                                                                           #
//############################################################################

// ===========================================================================
//                         Definition of static attributes
// ===========================================================================

// ===========================================================================
//                                  Constructors
// ===========================================================================
agent::agent(void)
{
	coord=new double[2];
	coord[0]=(rand()/(double)RAND_MAX) * WIDTH;
	coord[1]=(rand()/(double)RAND_MAX) * HEIGHT;

	//Initial speed: vx=1; vy=1
	speed=new double[2];
	speed[0]=1;
	speed[1]=1;
}

// ===========================================================================
//                                  Destructor
// ===========================================================================
agent::~agent(void)
{
	delete coord;
	coord=NULL;
	delete speed;
	speed=NULL;
}

// ===========================================================================
//                                 Public Methods
// ===========================================================================

double* agent::get_coord(void) const
{
	return coord;
}

double* agent::get_speed(void) const
{
	return speed;
}

bool agent::near(const agent &other) const
{
	bool res=0;
	double norm=sqrt(coord[0]*other.get_coord()[0]+coord[1]*other.get_coord()[1]);
	if(norm<RADIUS)
	{
		res=1;
	}
	return res;
}

double* agent::speed1(agent* birds, int size, int pos)
{
	double* v1=new double[2];
	v1[0]=0;
	v1[1]=0;

	int i=0;
	int nb=0;
	for(i=0;i<size;i++)
	{
		if(this->near(birds[i])==1 && i!=pos)
		{
			v1[0]=v1[0]+birds[i].get_speed()[0]-speed[0];
			v1[1]=v1[1]+birds[i].get_speed()[1]-speed[1];
			nb++;
		}
	}
	v1[0]=v1[0]/nb;
	v1[1]=v1[1]/nb;

	return v1;
}
// ===========================================================================
//                                Protected Methods
// ===========================================================================

// ===========================================================================
//                               Non inline accessors
// ===========================================================================
